{"version":3,"sources":["src/shared/canvas.js","src/KeyboardHandler.js","src/input.js","src/AudioPlayer.js","src/classes/loaders.js","src/classes/character.js","src/classes/scene.js","src/shared/helpers.js","src/classes/spider.js","src/shared/UI.js","src/classes/plant.js","src/classes/light.js","src/classes/timer.js","src/classes/index.js","src/clickHandler.js","src/gameLoop.js","static/manifests/gameConfig.json","src/main.js","../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/css-loader.js","../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["canvas","document","querySelector","ctx","getContext","font","width","innerWidth","height","innerHeight","mask","createElement","maskCtx","groundPositionX","groundHeight","groundY","resizeCanvas","canvasCenter","x","y","window","addEventListener","KeyboardHandler","constructor","keyStates","Map","keyMap","addMapping","code","callback","set","handleEvent","event","has","preventDefault","keyState","type","get","listenTo","forEach","eventName","setUpKeyboard","character","keyboard","direction","right","left","jumping","setUpMouse","clientX","clientY","rotate","e","onClick","AudioPlayer","audioContext","AudioContext","audioBuffers","muted","gainNode","createGain","loadAudio","src","fetch","then","response","arrayBuffer","decodeAudioData","addAudio","name","buffer","playAudio","source","createBufferSource","connect","destination","start","toggleMuteAudio","gain","value","loadAllSounds","Promise","all","audioPlayer","gunshotSrc","splashSrc","glassShatterSrc","musicSrc","gunshot","splash","glass","music","loadImage","url","resolve","image","Image","loadManifest","res","json","loadAnimations","animations","animationsMap","animation","spriteMap","frames","frame","rect","Character","manifest","isOnGround","deltaX","deltaY","angle","velocityX","velocityY","gravity","flip","shot","distance","ready","streak","highestStreak","lowerBody","runningAnimation","jumpingAnimation","upperBody","flashAnimation","active","duration","flashImage","shootingAnimation","size","setUp","draw","rotationPoint","strokeStyle","getFrame","Math","floor","translate","runShootingAnimation","drawImage","imageFlipped","setTransform","fillStyle","move","spriteSheet","drawFlash","fillRect","atan2","PI","epicEntrance","reject","entering","setInterval","clearInterval","loadCharacter","spriteSheetURL","imageURL","flippedImageURL","flashImageURL","animationsToBeLoaded","Scene","loadScene","mainImageURL","getRandomInt","max","random","randomIntFromRange","min","checkCollision","obj1","obj2","Spider","position","isShot","hasKilledAPlant","killer","splashAngle","cos","sin","points","shown","speed","multiplier","splashImage","drawPoints","plants","plant","plantBoundingRect","shrink","game","state","spidersKilled","config","levels","level","numberOfSpiders","textAlign","fillText","spidersKilledTotal","score","biggestStreak","SpiderFactory","createSpiders","spiders","i","length","push","loadSpiderFactory","splashImageURL","addEventListeners","querySelectorAll","el","target","dataset","id","plantSeed","classList","toggle","showGameOver","remove","innerHTML","reduce","acc","updateLevel","innerText","updateScore","updateStreak","streakCont","offsetWidth","add","hideLoadingScreen","PlantFactory","createPlants","numberOfPlants","loadedPlantImages","potMargin","plantSizes","widthSum","offset","Plant","positionX","positionY","plantImages","planted","showSeed","potCenter","timeToShowSeedButton","activePlant","activePlantImage","createSeedButton","grow","seedsPlanted","outerHTML","showSeedButton","overlay","loadPlantFactory","Light","color","lightWidth","turnOn","numberOfLights","lampCenter","turnedOn","perspective","drawLight","beginPath","moveTo","lineTo","closePath","fill","drawBody","LightFactory","createLights","delay","lightMargin","lights","light","loadLightFactory","Timer","startTime","timeElapsed","Date","logTimeElapsed","timeDiff","seconds","round","getTimeElapsed","checkTarget","targets","find","GameLoop","seedsShown","currentLevel","gameOver","levelUpdated","console","log","timer","scene","plantFactory","lightFactory","spiderFactory","settings","numberOfPots","lamps","timing","startLights","entity","nextLevel","gameLoop","globalCompositeOperation","spider","showSeeds","lamp","requestAnimationFrame","module","exports","titleScreen","tutorialScreen","startGame","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","replace","bundle","require","updateLink","link","newLink","cloneNode","onload","href","split","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","OVERLAY_ID","OldModule","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","createErrorOverlay","body","appendChild","getElementById","stackTrace","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"main.1e43358e.js","sourceRoot":"..","sourcesContent":["export const canvas = document.querySelector('canvas')\nexport const ctx = canvas.getContext('2d')\nctx.font = '30px Anton'\ncanvas.width = innerWidth\ncanvas.height = innerHeight\n\nexport const mask = document.createElement('canvas')\nexport const maskCtx = mask.getContext('2d')\nmask.width = innerWidth\nmask.height = innerHeight\n\nexport const groundPositionX = 0\n\nexport const groundHeight = 15\n\nexport let groundY = canvas.height - groundHeight\n\nconst resizeCanvas = () => {\n    canvas.width = innerWidth\n    canvas.height = innerHeight\n    mask.width = innerWidth\n    mask.height = innerHeight\n    groundY = canvas.height - groundHeight\n}\n\nexport const canvasCenter = { x: canvas.width / 2, y: canvas.height / 2 }\n\nwindow.addEventListener('resize', resizeCanvas)\n","export default class KeyboardHandler {\n    constructor() {\n        // Holds the current state of a given key\n        this.keyStates = new Map()\n\n        // Holds the callback functions for a key code\n        this.keyMap = new Map()\n    }\n\n    addMapping(code, callback) {\n        this.keyMap.set(code, callback)\n    }\n\n    handleEvent(event) {\n        const { code } = event\n\n        if (!this.keyMap.has(code)) {\n            return\n        }\n\n        event.preventDefault()\n\n        const keyState = event.type === 'keydown' ? true : false\n\n        if (this.keyStates.get(code) === keyState) {\n            return\n        }\n\n        this.keyStates.set(code, keyState)\n\n        this.keyMap.get(code)(keyState)\n    }\n\n    listenTo(window) {\n        ;['keydown', 'keyup'].forEach(eventName => {\n            window.addEventListener(eventName, event => {\n                this.handleEvent(event)\n            })\n        })\n    }\n}\n","import KeyboardHandler from './KeyboardHandler'\nimport { canvas } from '/src/shared/canvas'\n\nexport const setUpKeyboard = character => {\n    const keyboard = new KeyboardHandler()\n\n    keyboard.addMapping('KeyD', keyState => {\n        character.direction.right = keyState\n    })\n\n    keyboard.addMapping('KeyA', keyState => {\n        character.direction.left = keyState\n    })\n\n    keyboard.addMapping('Space', keyState => {\n        character.direction.jumping = keyState\n    })\n\n    keyboard.listenTo(window)\n}\n\nexport const setUpMouse = character => {\n    canvas.addEventListener('mousemove', ({ clientX, clientY }) => {\n        character.rotate(clientX, clientY)\n    })\n    canvas.addEventListener('click', e => {\n        character.onClick()\n    })\n}\n","import gunshotSrc from '/static/sounds/ShotgunQuieter.mp3'\nimport splashSrc from '/static/sounds/Splash.mp3'\nimport glassShatterSrc from '/static/sounds/GlassShatter.mp3'\nimport musicSrc from '/static/sounds/reggae.mp3'\n\nexport class AudioPlayer {\n    constructor() {\n        this.audioContext = new AudioContext()\n        this.audioBuffers = new Map()\n        this.muted = false\n        this.gainNode = this.audioContext.createGain()\n    }\n    loadAudio(src) {\n        return fetch(src)\n            .then(response => response.arrayBuffer())\n            .then(arrayBuffer => this.audioContext.decodeAudioData(arrayBuffer))\n    }\n    addAudio(name, buffer) {\n        this.audioBuffers.set(name, buffer)\n    }\n    playAudio(name) {\n        const source = this.audioContext.createBufferSource()\n        source.connect(this.gainNode)\n        this.gainNode.connect(this.audioContext.destination)\n        source.buffer = this.audioBuffers.get(name)\n        source.start(0)\n    }\n    toggleMuteAudio() {\n        if (!this.muted) {\n            this.muted = true\n            this.gainNode.gain.value = 0\n        } else {\n            this.muted = false\n            this.gainNode.gain.value = 1\n        }\n    }\n    async loadAllSounds() {\n        await Promise.all([\n            audioPlayer.loadAudio(gunshotSrc),\n            audioPlayer.loadAudio(splashSrc),\n            audioPlayer.loadAudio(glassShatterSrc),\n            audioPlayer.loadAudio(musicSrc)\n        ]).then(([gunshot, splash, glass, music]) => {\n            audioPlayer.addAudio('gunshot', gunshot)\n            audioPlayer.addAudio('splash', splash)\n            audioPlayer.addAudio('glass', glass)\n            audioPlayer.addAudio('music', music)\n        })\n    }\n}\n\nexport const audioPlayer = new AudioPlayer()\naudioPlayer.toggleMuteAudio()\n","export function loadImage(url) {\n    return new Promise(resolve => {\n        const image = new Image()\n        image.addEventListener('load', () => {\n            resolve(image)\n        })\n        image.src = url\n    })\n}\n\nexport function loadManifest(name) {\n    return fetch(`./manifests/${name}.json`).then(res => res.json())\n}\n\nexport function loadAnimations(animations) {\n    const animationsMap = new Map()\n    animations.forEach(animation => {\n        const spriteMap = new Map()\n        animation.frames.forEach(frame => {\n            spriteMap.set(frame.name, frame.rect)\n        })\n        animationsMap.set(animation.name, spriteMap)\n    })\n    return animationsMap\n}\n","import { canvas } from '/src/shared/canvas'\nimport { groundHeight } from '/src/shared/canvas'\nimport { setUpKeyboard, setUpMouse } from '../input'\nimport { audioPlayer } from '../AudioPlayer'\nimport { loadImage, loadManifest, loadAnimations } from './loaders'\nimport { groundY } from '/src/shared/canvas'\n\nexport class Character {\n    constructor(manifest) {\n        this.manifest = manifest\n        this.direction = {\n            left: false,\n            right: false,\n            jumping: false\n        }\n        this.isOnGround = true\n        this.deltaX = 0\n        this.deltaY = 0\n        this.angle = 0\n        this.velocityX = 6\n        this.velocityY = 0\n        this.gravity = 0.6\n        this.flip = false\n        this.shot = false\n        this.distance = 0\n        this.ready = true\n        this.streak = 0\n        this.highestStreak = 0\n        this.lowerBody = {\n            ...this.manifest.lowerBody,\n            runningAnimation: this.manifest.animations.get('running'),\n            jumpingAnimation: this.manifest.animations.get('jumping')\n        }\n        this.upperBody = {\n            ...this.manifest.upperBody,\n            x: this.x - 30,\n            y: this.y - this.lowerBody.height + 70\n        }\n        this.x = 0\n        this.y = canvas.height - groundHeight - this.lowerBody.height + 5\n        this.flashAnimation = {\n            active: false,\n            duration: 3,\n            frame: 0,\n            image: this.manifest.flashImage\n        }\n        this.shootingAnimation = {\n            active: false,\n            duration: 4,\n            frame: 0,\n            size: 5\n        }\n        this.setUp()\n    }\n    draw(ctx) {\n        this.upperBody = {\n            ...this.upperBody,\n            rotationPoint: {\n                x: this.x + this.lowerBody.width / 2,\n                y: this.y + 25\n            },\n            x: this.x - 25,\n            y: this.y - this.lowerBody.height + (this.flip ? 160 : 100)\n        }\n        ctx.strokeStyle = 'red'\n        //ctx.strokeRect(this.x, this.y, this.lowerBody.width, this.lowerBody.height)\n        this.getFrame(ctx, `walk-${Math.floor(this.distance / 20) % this.lowerBody.runningAnimation.size}`)\n        //this.getFrame(ctx, 'walk-1')\n        ctx.translate(this.upperBody.rotationPoint.x, this.upperBody.rotationPoint.y)\n        ctx.rotate(this.angle)\n        ctx.translate(-this.upperBody.rotationPoint.x, -this.upperBody.rotationPoint.y)\n        ctx.strokeStyle = 'limegreen'\n        this.runShootingAnimation()\n        ctx.drawImage(\n            this.flip ? this.upperBody.imageFlipped : this.upperBody.image,\n            this.upperBody.x,\n            this.upperBody.y,\n            this.upperBody.width,\n            this.upperBody.height\n        )\n        //ctx.strokeRect(this.upperBody.x, this.upperBody.y, this.upperBody.width, this.upperBody.height)\n        ctx.setTransform(1, 0, 0, 1, 0, 0)\n        ctx.fillStyle = 'blue'\n        //d ctx.fillRect(this.upperBody.rotationPoint.x - 5, this.upperBody.rotationPoint.y - 5, 10, 10)\n    }\n    move() {\n        this.velocityY += this.gravity\n        this.y += this.velocityY\n\n        if (this.y + this.lowerBody.height >= groundY) {\n            this.y = groundY - this.lowerBody.height\n            this.isOnGround = true\n            this.velocityY = 0.0\n        }\n\n        if (this.direction.left) {\n            if (this.x > 0) {\n                this.x -= this.velocityX\n                this.distance += this.velocityX\n            }\n        } else if (this.direction.right) {\n            if (this.x < canvas.width - this.upperBody.width) {\n                this.x += this.velocityX\n                this.distance += this.velocityX\n            }\n        } else {\n            if (this.ready) this.distance = 0\n        }\n        if (this.direction.jumping) {\n            if (this.isOnGround) {\n                this.velocityY = -12.0\n                this.isOnGround = false\n            }\n        }\n    }\n    getFrame(ctx, name) {\n        if (this.isOnGround) {\n            const frame = this.lowerBody.runningAnimation.get(name)\n            if (frame) {\n                ctx.drawImage(\n                    this.lowerBody.spriteSheet,\n                    frame.x,\n                    this.flip ? frame.y + frame.height : frame.y,\n                    frame.width,\n                    frame.height,\n                    this.x,\n                    this.y,\n                    this.lowerBody.width,\n                    this.lowerBody.height\n                )\n            } else {\n                ctx.drawImage(\n                    this.lowerBody.spriteSheet,\n                    frame.x,\n                    this.flip ? frame.y + frame.height : frame.y,\n                    frame.width,\n                    frame.height,\n                    this.x,\n                    this.y,\n                    this.lowerBody.width,\n                    this.lowerBody.height\n                )\n            }\n        } else {\n            const frame = this.lowerBody.jumpingAnimation.get('jump-0')\n            ctx.drawImage(\n                this.lowerBody.spriteSheet,\n                frame.x,\n                this.flip ? frame.y + frame.height : frame.y,\n                frame.width,\n                frame.height,\n                this.x,\n                this.y,\n                this.lowerBody.width,\n                this.lowerBody.height\n            )\n        }\n    }\n    drawFlash(maskCtx) {\n        if (this.flashAnimation.active == true) {\n            if (this.flashAnimation.frame >= this.flashAnimation.duration) {\n                this.flashAnimation.frame = 0\n                this.flashAnimation.active = false\n            } else {\n                this.flashAnimation.frame++\n                maskCtx.fillStyle = 'rgba(249, 191, 0, 0.1)'\n                maskCtx.fillRect(0, 0, canvas.width, canvas.height)\n                maskCtx.translate(this.upperBody.rotationPoint.x, this.upperBody.rotationPoint.y)\n                maskCtx.rotate(this.angle)\n                maskCtx.translate(-this.upperBody.rotationPoint.x, -this.upperBody.rotationPoint.y)\n                maskCtx.strokeStyle = 'limegreen'\n                //ctx.strokeRect(this.upperBody.x, this.upperBody.y, this.upperBody.width, this.upperBody.height)\n                maskCtx.drawImage(\n                    this.flashAnimation.image,\n                    this.upperBody.x + this.upperBody.width,\n                    this.upperBody.y + (this.flip ? 0 : 100),\n                    this.upperBody.width,\n                    this.upperBody.height / 2\n                )\n                maskCtx.setTransform(1, 0, 0, 1, 0, 0)\n            }\n        }\n    }\n    runShootingAnimation() {\n        if (this.shootingAnimation.active) {\n            if (this.shootingAnimation.frame >= this.shootingAnimation.duration) {\n                this.shootingAnimation.frame = 0\n                this.shootingAnimation.active = false\n            } else {\n                this.shootingAnimation.frame++\n                this.upperBody.x = this.upperBody.x - this.shootingAnimation.size * this.shootingAnimation.frame\n            }\n        }\n    }\n    rotate(clientX, clientY) {\n        const deltaX = this.x + this.upperBody.width / 2 - clientX\n        const deltaY = this.y + this.upperBody.height / 2 - clientY\n        this.angle = Math.atan2(deltaY, deltaX) + Math.PI\n        if (this.angle > 1.5 && this.angle < 4.7) {\n            this.flip = true\n        } else {\n            this.flip = false\n        }\n    }\n    onClick() {\n        audioPlayer.playAudio('gunshot')\n        this.flashAnimation.active = true\n        this.shootingAnimation.active = true\n    }\n    setUp() {\n        setUpKeyboard(this)\n        setUpMouse(this)\n    }\n    epicEntrance() {\n        this.setUp()\n        return new Promise((resolve, reject) => {\n            this.x = -this.upperBody.width\n\n            const entering = setInterval(() => {\n                if (this.x < canvas.width / 7) {\n                    this.x += 1\n                    this.distance += 2\n                } else {\n                    clearInterval(entering)\n                    //this.setUp()\n                    this.ready = true\n                    resolve()\n                }\n            }, 10)\n        })\n    }\n}\n\nexport const loadCharacter = async () => {\n    const manifest = await loadManifest('character')\n    manifest.lowerBody = {\n        ...manifest.lowerBody,\n        spriteSheet: await loadImage(manifest.lowerBody.spriteSheetURL)\n    }\n    manifest.upperBody = {\n        ...manifest.upperBody,\n        image: await loadImage(manifest.upperBody.imageURL),\n        imageFlipped: await loadImage(manifest.upperBody.flippedImageURL)\n    }\n    manifest.flashImage = await loadImage(manifest.flashImageURL)\n    manifest.animations = loadAnimations(manifest.animationsToBeLoaded)\n    return new Character(manifest)\n}\n","import { canvas } from '/src/shared/canvas'\nimport { loadImage, loadManifest } from '/src/classes/loaders'\n\nexport class Scene {\n    constructor(manifest) {\n        this.manifest = manifest\n    }\n    draw(ctx) {\n        ctx.drawImage(this.manifest.image, 0, 0, canvas.width, canvas.height)\n    }\n}\n\nexport const loadScene = async () => {\n    const manifest = await loadManifest('scene')\n    manifest.image = await loadImage(manifest.mainImageURL)\n    return new Scene(manifest)\n}\n","export function getRandomInt(max) {\n    return Math.floor(Math.random() * Math.floor(max))\n}\n\nexport function randomIntFromRange(min, max) {\n    return Math.floor(Math.random() * (max - min + 1) + min)\n}\n\nexport function checkCollision(obj1, obj2) {\n    if (\n        obj1.x < obj2.x + obj2.width &&\n        obj1.x + obj1.width > obj2.x &&\n        obj1.y < obj2.y + obj2.height &&\n        obj1.y + obj1.height > obj2.y\n    ) {\n        return true\n    } else {\n        return false\n    }\n}\n","import { canvas, canvasCenter } from '/src/shared/canvas'\nimport { randomIntFromRange } from '/src/shared/helpers'\nimport { audioPlayer } from '../AudioPlayer'\nimport { loadImage, loadManifest } from './loaders'\n\nexport class Spider {\n    constructor(manifest) {\n        const { destination, position, width, height } = manifest\n        this.manifest = manifest\n        this.height = width\n        this.width = height\n        this.x = position.x\n        this.y = position.y\n        this.isShot = false\n        this.hasKilledAPlant = false\n        this.killer = {}\n        this.deltaX = destination.x - this.x\n        this.deltaY = destination.y - this.y\n        this.angle = Math.atan2(this.deltaY, this.deltaX)\n        this.splashAngle = 0\n        this.velocityX = Math.cos(this.angle) * 1.0\n        this.velocityY = Math.sin(this.angle) * 1.0\n        this.direction = this.angle - Math.PI / 2\n        this.distance = 0\n        this.points = {\n            shown: false,\n            value: Math.floor(1000 / this.width),\n            y: this.y,\n            speed: 2,\n            multiplier: 1\n        }\n    }\n    draw(ctx) {\n        if (!this.isShot && !this.hasKilledAPlant) {\n            this.distance += 2\n            ctx.translate(this.x + this.width / 2, this.y + this.height / 2)\n            ctx.rotate(this.direction)\n            ctx.translate(-this.x - this.width / 2, -this.y - this.height / 2)\n            this.getFrame(ctx, `spider-${Math.floor(this.distance / 20) % this.manifest.spriteMap.size}`)\n            ctx.setTransform(1, 0, 0, 1, 0, 0)\n            this.checkCollision()\n        } else if (this.hasKilledAPlant) {\n        } else {\n            ctx.translate(this.x + this.width / 2, this.y + this.height / 2)\n            ctx.rotate(-this.splashAngle + Math.PI)\n            ctx.translate(-this.x - this.width / 2, -this.y - this.height / 2)\n            ctx.drawImage(\n                this.manifest.splashImage,\n                this.x - 10,\n                this.y - this.height,\n                this.width + 20,\n                this.height * 2\n            )\n            ctx.setTransform(1, 0, 0, 1, 0, 0)\n            if (this.points.shown) {\n                this.drawPoints(ctx)\n            }\n        }\n    }\n    checkCollision() {\n        this.manifest.plants.forEach(plant => {\n            if (\n                plant.plantBoundingRect.x < this.x + this.width &&\n                plant.plantBoundingRect.x + plant.plantBoundingRect.width > this.x &&\n                plant.plantBoundingRect.y < this.y + this.height &&\n                plant.plantBoundingRect.y + plant.plantBoundingRect.height > this.y\n            ) {\n                plant.shrink()\n                this.hasKilledAPlant = true\n                window.game.state.spidersKilled += 1\n                if (\n                    window.game.state.spidersKilled ===\n                    window.game.config.levels[window.game.state.level].numberOfSpiders\n                ) {\n                    window.game.state.level++\n                }\n            }\n        })\n    }\n    drawPoints(ctx) {\n        this.points.y -= this.points.speed\n        ctx.font = `${this.width - 10}px Anton`\n        ctx.fillStyle = 'white'\n        ctx.textAlign = 'center'\n        ctx.fillText(Math.floor(this.points.value * this.points.multiplier), this.x + this.width / 2, this.points.y)\n        if (this.points.y < 0) {\n            this.points.shown = false\n        }\n    }\n    getFrame(ctx, name) {\n        const frame = this.manifest.spriteMap.get(name)\n        if (frame) {\n            ctx.drawImage(\n                this.manifest.image,\n                frame.x,\n                frame.y,\n                frame.width,\n                frame.height,\n                (this.x += this.velocityX * 1),\n                (this.y += this.velocityY * 1),\n                this.width,\n                this.height\n            )\n        }\n    }\n    onClick() {\n        window.game.state.streak += 1\n        window.game.state.spidersKilledTotal += 1\n        window.game.state.spidersKilled += 1\n        this.points.multiplier = 1 + window.game.state.streak * 0.1\n        window.game.state.score += Math.floor(this.points.value * this.points.multiplier)\n        if (window.game.state.streak > window.game.state.biggestStreak) {\n            window.game.state.biggestStreak = window.game.state.streak\n        }\n        audioPlayer.playAudio('splash')\n        this.isShot = true\n        this.points.shown = true\n        this.points.y = this.y\n        this.killer = { x: this.manifest.character.upperBody.x, y: this.manifest.character.upperBody.y }\n        const deltaX = this.x - (this.killer.x + this.manifest.character.upperBody.width / 2)\n        const deltaY = this.y - (this.killer.y + 100)\n        this.splashAngle = Math.atan2(deltaX, deltaY)\n        if (window.game.state.spidersKilled === window.game.config.levels[window.game.state.level].numberOfSpiders) {\n            window.game.state.level++\n        }\n    }\n}\n\nexport class SpiderFactory {\n    constructor(manifest) {\n        this.manifest = manifest\n    }\n    createSpiders(numberOfSpiders, character, plants) {\n        this.manifest.character = character\n        this.manifest.plants = plants\n        let spiders = []\n        for (let i = 0; i < numberOfSpiders; i++) {\n            this.manifest.position = {\n                x: randomIntFromRange(-200, canvas.width + 200),\n                y: randomIntFromRange(-200, 0)\n            }\n            const size = randomIntFromRange(25, 80)\n            this.manifest.width = size\n            this.manifest.height = size\n\n            //spider will pick a random plant and attack it\n            const plant = plants[randomIntFromRange(0, plants.length - 1)]\n            this.manifest.destination = {\n                x: plant.x + plant.width / 2,\n                y: plant.y\n            }\n            spiders.push(new Spider(this.manifest))\n        }\n        return spiders\n    }\n}\n\nexport const loadSpiderFactory = async () => {\n    const manifest = await loadManifest('spider')\n    manifest.image = await loadImage(manifest.mainImageURL)\n    manifest.splashImage = await loadImage(manifest.splashImageURL)\n    const spriteMap = new Map()\n    manifest.frames.forEach(frame => {\n        spriteMap.set(frame.name, frame.rect)\n    })\n    manifest.spriteMap = spriteMap\n    return new SpiderFactory(manifest)\n}\n","import { audioPlayer } from '../AudioPlayer'\n\n// file for interaction between html elements and canvas\nexport const addEventListeners = plants => {\n    document.querySelectorAll('.seedButton').forEach(el => {\n        el.addEventListener('click', ({ target }) => {\n            plants[target.dataset.id].plantSeed()\n        })\n    })\n    document.querySelector('#mute-button').addEventListener('click', function () {\n        this.classList.toggle('mute')\n        audioPlayer.toggleMuteAudio()\n    })\n}\n\nexport const showGameOver = () => {\n    document.querySelector('#gameOverScreen').classList.remove('hidden')\n    document.querySelector('#gameOverScreen').innerHTML += `\n        <div>\n            <h2>Spiders killed: ${window.game.state.spidersKilledTotal}</h2>\n            <h2>Points from spiders: ${window.game.state.score}</h2>\n            <h2>Highest killstreak: ${window.game.state.biggestStreak}</h2>\n            <h2>Points from plants: ${window.game.plants.reduce((acc, plant) => {\n                return acc + plant.size * 1000\n            }, 0)}</h2>\n        </div>\n    `\n}\n\nexport const updateLevel = () => {\n    if (window.game.state.level >= 0) {\n        document.querySelector('#level').innerText = window.game.state.level + 1\n        document.querySelector('#level').classList.remove('hidden')\n    }\n}\n\nexport const updateScore = () => {\n    document.querySelector('#score').innerText = window.game.state.score\n}\n\nexport const updateStreak = () => {\n    const streak = document.querySelector('#streak')\n    const streakCont = document.querySelector('#streak-container')\n    streak.innerText = Math.floor((1 + window.game.state.streak * 0.1) * 10) / 10\n    if (window.game.state.streak !== 0) {\n        streakCont.classList.remove('hidden')\n        streak.classList.remove('streak-animation')\n        streak.offsetWidth\n        streak.classList.add('streak-animation')\n        //streak.style.color = '#' + (((1 << 24) * Math.random()) | 0).toString(16)\n    } else {\n        streakCont.classList.add('hidden')\n    }\n}\n\nexport const hideLoadingScreen = () => {\n    document.querySelector('#loadingScreen').classList.add('hidden')\n}\n","import { groundY } from '/src/shared/canvas'\nimport { canvas } from '/src/shared/canvas'\nimport { addEventListeners } from '/src/shared/UI'\nimport { loadImage, loadManifest } from '/src/classes/loaders'\n\nexport class PlantFactory {\n    constructor(manifest) {\n        this.manifest = manifest\n    }\n    createPlants(numberOfPlants) {\n        const { width, height, image, loadedPlantImages, potMargin, plantSizes } = this.manifest\n        const plants = []\n        const widthSum = width * numberOfPlants + potMargin * (numberOfPlants - 1)\n        const offset = (canvas.width - widthSum) / 2\n        //plantSizes.reduce((acc, b) => acc + b.width, 0)\n\n        for (let i = 0; i < numberOfPlants; i++) {\n            plants.push(\n                new Plant(\n                    offset + (width + (i === numberOfPlants ? 0 : potMargin)) * i,\n                    groundY - height,\n                    plantSizes,\n                    image,\n                    loadedPlantImages,\n                    i\n                )\n            )\n        }\n        addEventListeners(plants)\n        return plants\n    }\n}\n\nexport class Plant {\n    constructor(positionX, positionY, plantSizes, image, plantImages, id) {\n        this.id = id\n        this.x = positionX\n        this.y = positionY - 15\n        this.size = 0\n        this.plantSizes = plantSizes\n        this.planted = false\n        this.showSeed = true\n        this.plantImages = plantImages\n        this.width = 170\n        this.height = 120\n        this.potCenter = {\n            x: this.x + this.width / 2,\n            y: this.y + this.height / 2\n        }\n        this.image = image\n        this.timeToShowSeedButton = 1\n        this.activePlant = plantSizes[this.size]\n        this.activePlantImage = plantImages[this.size]\n        this.plantBoundingRect = {\n            x: this.potCenter.x - this.activePlant.width / 2,\n            y: this.y - this.activePlant.height,\n            width: this.activePlant.width,\n            height: this.activePlant.height\n        }\n        this.createSeedButton()\n    }\n    draw(ctx) {\n        ctx.drawImage(this.image, this.x, this.y, this.width, this.height)\n        if (this.planted) {\n            ctx.drawImage(\n                this.activePlantImage,\n                this.plantBoundingRect.x,\n                this.plantBoundingRect.y,\n                this.plantBoundingRect.width,\n                this.plantBoundingRect.height\n            )\n        }\n    }\n    grow() {\n        if (this.size < this.plantImages.length - 1 && this.planted) {\n            this.size++\n            this.activePlant = this.plantSizes[this.size]\n            this.activePlantImage = this.plantImages[this.size]\n            this.plantBoundingRect = {\n                x: this.potCenter.x - this.activePlant.width / 2,\n                y: this.y - this.activePlant.height,\n                width: this.activePlant.width,\n                height: this.activePlant.height\n            }\n        }\n    }\n    shrink() {\n        if (this.size > 0 && this.planted) {\n            this.size--\n            this.activePlant = this.plantSizes[this.size]\n            this.activePlantImage = this.plantImages[this.size]\n            this.plantBoundingRect = {\n                x: this.potCenter.x - this.activePlant.width / 2,\n                y: this.y - this.activePlant.height,\n                width: this.activePlant.width,\n                height: this.activePlant.height\n            }\n        } else {\n            this.size = -1\n            this.planted = false\n        }\n    }\n    onClick() {\n        this.grow()\n    }\n    plantSeed() {\n        window.game.state.seedsPlanted += 1\n        this.planted = true\n        document.querySelector(`.seedButton[data-id=\"${this.id}\"]`).outerHTML = ''\n    }\n    showSeedButton() {\n        document.querySelector(`.seedButton[data-id=\"${this.id}\"]`).classList.add('active')\n    }\n    createSeedButton() {\n        overlay.innerHTML += `\n        <div \n            class=\"seedButton\"\n            data-id=\"${this.id}\"\n            style=\"left: ${this.potCenter.x - 40}px; top: ${this.potCenter.y - 160}px;\" \n        >\n            <div class=\"seedButton__image\" data-id=\"${this.id}\">\n            </div>\n        </div>\n        `\n    }\n}\n\nexport const loadPlantFactory = async () => {\n    const manifest = await loadManifest('plant')\n    manifest.image = await loadImage(manifest.mainImageURL)\n    manifest.loadedPlantImages = []\n    Promise.all([\n        loadImage(manifest.plantImages[0]),\n        loadImage(manifest.plantImages[1]),\n        loadImage(manifest.plantImages[2]),\n        loadImage(manifest.plantImages[3])\n    ]).then(async plants => {\n        manifest.loadedPlantImages = await plants\n    })\n    return new PlantFactory(manifest)\n}\n","import { canvas, maskCtx } from '/src/shared/canvas'\nimport { audioPlayer } from '../AudioPlayer'\nimport { loadImage, loadManifest } from './loaders'\n\nexport class Light {\n    constructor(id, positionX, positionY, width, height, image, color, lightWidth, turnOn, numberOfLights) {\n        this.id = id\n        this.width = width\n        this.height = height\n        this.x = positionX\n        this.y = positionY\n        this.lampCenter = {\n            x: this.x + this.width / 2,\n            y: this.y + this.height / 2\n        }\n        this.turnedOn = false\n        this.color = color\n        this.lightWidth = lightWidth\n        this.image = image\n        this.offset = 10\n        this.isShot = false\n        this.perspective = 40\n        this.turnOn = turnOn\n        this.numberOfLights = numberOfLights\n    }\n    drawLight(ctx) {\n        if (this.turnedOn) {\n            ctx.beginPath()\n            //top left\n            ctx.moveTo(this.x + this.offset, this.y + this.height)\n            //bottom left\n            if (this.id == 0) {\n                ctx.lineTo(this.x - this.lightWidth, canvas.height - 65)\n                ctx.lineTo(this.x - this.lightWidth - this.perspective, canvas.height)\n            } else {\n                ctx.lineTo(this.x - this.lightWidth, canvas.height)\n            }\n            //bottom right\n            if (this.id == this.numberOfLights - 1) {\n                ctx.lineTo(this.x + +this.width + this.lightWidth + this.perspective, canvas.height)\n                ctx.lineTo(this.x + this.width + this.lightWidth, canvas.height - 65)\n            } else {\n                ctx.lineTo(this.x + this.width + this.lightWidth, canvas.height)\n            }\n            //top right\n            ctx.lineTo(this.x + this.width - this.offset, this.y + this.height)\n            ctx.closePath()\n            ctx.fillStyle = this.color\n            ctx.fill()\n        }\n    }\n    drawBody(ctx) {\n        ctx.drawImage(this.image, this.x, this.y, this.width, this.height)\n    }\n    draw(ctx) {\n        this.drawBody(ctx)\n        this.drawLight(maskCtx)\n    }\n    onClick() {\n        if (!this.isShot) {\n            audioPlayer.playAudio('glass')\n        }\n        this.isShot = true\n    }\n}\n\nexport class LightFactory {\n    constructor(manifest) {\n        this.manifest = manifest\n    }\n\n    createLights(numberOfLights, delay) {\n        const { width, height, image, color, lightWidth, lightMargin } = this.manifest\n        const lights = []\n        const widthSum = width * numberOfLights + lightMargin * (numberOfLights - 1)\n        const offset = (canvas.width - widthSum) / 2\n\n        for (let i = 0; i < numberOfLights; i++) {\n            const turnOn = i + delay\n            const light = new Light(\n                i,\n                offset + (width + (i === numberOfLights ? 0 : lightMargin)) * i,\n                0,\n                width,\n                height,\n                image,\n                color,\n                lightWidth,\n                turnOn,\n                numberOfLights\n            )\n            lights.push(light)\n        }\n\n        return lights\n    }\n}\n\nexport const loadLightFactory = async () => {\n    const manifest = await loadManifest('light')\n    manifest.image = await loadImage(manifest.mainImageURL)\n    return new LightFactory(manifest)\n}\n","export class Timer {\n    constructor() {\n        this.startTime = 0\n        this.timeElapsed = 0\n    }\n    start() {\n        this.startTime = new Date()\n    }\n    logTimeElapsed() {\n        let timeDiff = (new Date() - this.startTime) / 1000\n        let seconds = Math.round(timeDiff)\n        if (this.timeElapsed != seconds) {\n            this.timeElapsed = seconds\n            //console.log(this.timeElapsed)\n        }\n    }\n    getTimeElapsed() {\n        return this.timeElapsed\n    }\n}\n","export * from './character'\nexport * from './scene'\nexport * from './spider'\nexport * from './plant'\nexport * from './light'\nexport * from './loaders'\nexport * from './timer'\n","export const checkTarget = ({ clientX, clientY }, targets, callback) => {\n    callback(\n        targets.find(\n            target =>\n                !target.isShot &&\n                clientX > target.x &&\n                clientX < target.x + target.width &&\n                clientY > target.y &&\n                clientY < target.y + target.height\n        )\n    )\n}\n","import { ctx, canvas, mask, maskCtx } from '/src/shared/canvas'\nimport { loadCharacter, loadScene, loadLightFactory, loadSpiderFactory, loadPlantFactory, Timer } from './classes'\nimport { randomIntFromRange } from '/src/shared/helpers'\nimport { showGameOver, updateLevel, hideLoadingScreen, updateScore } from '/src/shared/UI'\nimport { audioPlayer } from './AudioPlayer'\n\nimport { checkTarget } from '/src/clickHandler'\nimport { updateStreak } from '/src/shared/UI'\n\nexport const GameLoop = async config => {\n    window.game = {\n        config: config,\n        state: {\n            seedsPlanted: 0,\n            seedsShown: false,\n            spidersKilled: 0,\n            spidersKilledTotal: 0,\n            level: -1,\n            currentLevel: -1,\n            gameOver: false,\n            levelUpdated: false,\n            score: 0,\n            streak: 0,\n            biggestStreak: 0\n        }\n    }\n    console.log('1')\n\n    const timer = new Timer()\n    const character = await loadCharacter()\n    const scene = await loadScene()\n    const plantFactory = await loadPlantFactory()\n    const lightFactory = await loadLightFactory()\n    const spiderFactory = await loadSpiderFactory()\n    await audioPlayer.loadAllSounds()\n\n    audioPlayer.playAudio('music')\n\n    const plants = plantFactory.createPlants(config.settings.plants.numberOfPots)\n    const lamps = lightFactory.createLights(config.settings.lights.numberOfLights, config.timing.startLights)\n    let spiders = []\n\n    //character.epicEntrance().then(() => {})\n\n    canvas.addEventListener('mousedown', e => {\n        checkTarget(e, [...spiders], entity => {\n            if (entity) entity.onClick()\n            else {\n                window.game.state.streak = 0\n            }\n            updateScore()\n            updateStreak(character.streak)\n        })\n        checkTarget(e, [...lamps, ...plants], entity => {\n            if (entity) entity.onClick()\n        })\n    })\n\n    const nextLevel = () => {\n        window.game.state.currentLevel = window.game.state.level\n        window.game.state.levelUpdated = false\n        window.game.state.spidersKilled = 0\n        spiders = []\n    }\n\n    timer.start()\n    console.log('2')\n\n    // forcing loading screen to see the amazingness\n    //setTimeout(() => hideLoadingScreen(), 2000)\n    hideLoadingScreen()\n\n    const gameLoop = () => {\n        ctx.globalCompositeOperation = 'normal'\n\n        scene.draw(ctx)\n\n        character.move()\n\n        spiders.forEach(spider => {\n            spider.draw(ctx)\n        })\n\n        if (!window.game.state.levelUpdated) {\n            window.game.state.levelUpdated = true\n            updateLevel()\n        }\n\n        if (config.timing.showSeeds == timer.getTimeElapsed()) {\n            window.game.state.level = 0\n            updateLevel()\n        }\n\n        if (window.game.state.level === 0 && window.game.state.currentLevel !== window.game.state.level) {\n            if (window.game.state.seedsPlanted == plants.length) {\n                if (spiders.length == 0) {\n                    spiders = spiderFactory.createSpiders(\n                        window.game.config.levels[0].numberOfSpiders,\n                        character,\n                        plants\n                    )\n                }\n            }\n            if (!window.game.state.seedsShown) {\n                window.game.state.seedsShown = true\n                plants.forEach(plant => {\n                    if (plant.showSeed) {\n                        plant.showSeedButton()\n                        plant.showSeed = false\n                    }\n                })\n            }\n        } else if (window.game.state.level === 1 && window.game.state.currentLevel !== window.game.state.level) {\n            nextLevel()\n            plants.forEach(plant => {\n                plant.grow()\n            })\n            //window.game.state.gameOver = true\n            window.game.plants = plants\n            spiders = spiderFactory.createSpiders(window.game.config.levels[1].numberOfSpiders, character, plants)\n        } else if (window.game.state.level === 2 && window.game.state.currentLevel !== window.game.state.level) {\n            nextLevel()\n            plants.forEach(plant => {\n                plant.grow()\n            })\n            spiders = spiderFactory.createSpiders(window.game.config.levels[2].numberOfSpiders, character, plants)\n        } else if (window.game.state.level === 3 && window.game.state.currentLevel !== window.game.state.level) {\n            nextLevel()\n            plants.forEach(plant => {\n                plant.grow()\n            })\n            spiders = spiderFactory.createSpiders(window.game.config.levels[3].numberOfSpiders, character, plants)\n        } else if (window.game.state.level === 4 && window.game.state.currentLevel !== window.game.state.level) {\n            nextLevel()\n            window.game.state.gameOver = true\n            window.game.plants = plants\n        }\n\n        plants.forEach(plant => {\n            plant.draw(ctx)\n        })\n\n        character.draw(ctx)\n\n        // drawing a black mask over the whole screen\n        maskCtx.fillStyle = 'rgb(68, 68, 68)'\n        //maskCtx.fillStyle = \"rgb(45, 45, 45)\";\n        maskCtx.fillRect(0, 0, mask.width, mask.height)\n\n        character.drawFlash(maskCtx)\n        // adding \"white\" light onto the mask\n        lamps.forEach(lamp => {\n            if (!lamp.isShot) {\n                if (!lamp.turnedOn && lamp.turnOn == timer.getTimeElapsed()) {\n                    lamp.turnedOn = true\n                }\n                lamp.drawBody(ctx)\n                lamp.drawLight(maskCtx)\n            } else {\n                lamp.drawBody(ctx)\n            }\n        })\n\n        // multiply the mask with the underlying canvas\n        ctx.globalCompositeOperation = 'multiply'\n        ctx.drawImage(mask, 0, 0)\n        timer.logTimeElapsed()\n\n        if (!window.game.state.gameOver) {\n            window.requestAnimationFrame(gameLoop)\n        } else {\n            showGameOver()\n        }\n    }\n\n    return () => {\n        //setInterval(gameLoop, 1000 / 60)\n        window.requestAnimationFrame(gameLoop)\n    }\n}\n","module.exports = {\n    \"name\": \"Plants and Spiders\",\n    \"settings\" : {\n        \"plants\": {\n            \"numberOfPots\": 3\n        },\n        \"lights\": {\n            \"numberOfLights\": 3\n        }\n    },\n    \"timing\": {\n        \"showSeeds\": 5,\n        \"startLights\": 2,\n        \"delayBetweenLights\": 1\n    },\n    \"levels\": [\n        { \n            \"id\": 0,\n            \"numberOfSpiders\": 30\n        },\n        { \n            \"id\": 1,\n            \"numberOfSpiders\": 15\n        },\n        { \n            \"id\": 2,\n            \"numberOfSpiders\": 20\n        },\n        { \n            \"id\": 3,\n            \"numberOfSpiders\": 25\n        }\n    ]\n};","import { GameLoop } from './gameLoop'\nimport config from '/static/manifests/gameConfig.json'\nimport './style.scss'\n\nconst titleScreen = document.querySelector('#titleScreen')\nconst tutorialScreen = document.querySelector('#tutorialScreen')\ntitleScreen.addEventListener('click', () => {\n    titleScreen.classList.add('hidden')\n\n    tutorialScreen.addEventListener('click', () => {\n        tutorialScreen.classList.add('hidden')\n\n        GameLoop(config).then(startGame => {\n            console.log('All systems are go!')\n            startGame()\n        })\n    })\n})\n\n/*features:\n- walk up to a plant to grow\n- shadows undercharacters\n- \n*/\n\n/* \n    GAME IDEA:\n    - player starts with planting plants\n    - spiders are coming towards your plants and want to eat them\n    - protect plants against spiders by shooting them\n    - plants grow every round\n    - spider touching a plant will cause the plant losing one growth cycle thus becoming smaller\n    - there will be more spiders and they will be faster or smaller each round (making them harder to hit)\n    - each spider picks one of the plants to attack at the beginning of his journey\n    - you get points subtracted every time you miss a shot\n    - collect plants at the end after 4 rounds, your score depends on how much of your plants is left\n    - best achievable score is when all plants are fully grown after 4 rounds and you have missed no shots\n*/\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}